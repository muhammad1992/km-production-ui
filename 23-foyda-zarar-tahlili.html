<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foyda/Zarar tahlili - Mebel ERP</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
        }
        .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #2c3e50 0%, #34495e 100%);
            height: 100vh;
            position: fixed;
            color: white;
            padding: 25px;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }
        .sidebar h2 {
            font-size: 24px;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #34495e;
            font-weight: 300;
            letter-spacing: 1px;
        }
        .sidebar::-webkit-scrollbar {
            width: 6px;
        }
        .sidebar::-webkit-scrollbar-track {
            background: #34495e;
        }
        .sidebar::-webkit-scrollbar-thumb {
            background: #5a6c7d;
            border-radius: 3px;
        }
        .menu-group {
            margin-bottom: 15px;
            background: rgba(52, 73, 94, 0.5);
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s;
        }
        .menu-group:hover {
            background: rgba(52, 73, 94, 0.8);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .menu-group-header {
            padding: 16px 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background 0.3s;
            font-weight: 500;
            font-size: 15px;
            letter-spacing: 0.5px;
        }
        .menu-group-header:hover {
            background: rgba(61, 86, 110, 0.5);
        }
        .menu-group-icon {
            margin-right: 12px;
            font-size: 20px;
        }
        .menu-group-title {
            flex: 1;
            display: flex;
            align-items: center;
        }
        .menu-toggle {
            transition: transform 0.3s;
            font-size: 14px;
            opacity: 0.7;
        }
        .menu-toggle.expanded {
            transform: rotate(90deg);
        }
        .menu-items {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
            background: rgba(44, 62, 80, 0.3);
        }
        .menu-items.expanded {
            max-height: 500px;
        }
        .menu-item {
            padding: 14px 20px 14px 45px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            display: flex;
            align-items: center;
            border-left: 4px solid transparent;
            letter-spacing: 0.3px;
            font-weight: 400;
        }
        .menu-item:hover {
            background: rgba(52, 152, 219, 0.15);
            border-left-color: #3498db;
            padding-left: 50px;
        }
        .menu-item.active {
            background: linear-gradient(90deg, rgba(231, 76, 60, 0.2) 0%, rgba(231, 76, 60, 0.1) 100%);
            border-left-color: #e74c3c;
            font-weight: 500;
        }
        .menu-item-icon {
            margin-right: 12px;
            opacity: 0.9;
            font-size: 16px;
        }
        .search-box {
            margin-bottom: 20px;
            position: relative;
        }
        .search-box input {
            width: 100%;
            padding: 12px 12px 12px 40px;
            background: rgba(52, 73, 94, 0.5);
            border: 1px solid rgba(61, 86, 110, 0.3);
            color: white;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }
        .search-box input:focus {
            outline: none;
            background: rgba(52, 73, 94, 0.8);
            border-color: #3498db;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        .search-box input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 16px;
            opacity: 0.5;
        }
        .main-content {
            margin-left: 280px;
            padding: 20px;
        }
        .header {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .filter-panel {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }
        select, input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        .btn-primary {
            background: #3498db;
            color: white;
        }
        .btn-success {
            background: #27ae60;
            color: white;
        }
        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .summary-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
            border-top: 4px solid;
        }
        .summary-value {
            font-size: 32px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        .summary-label {
            font-size: 12px;
            color: #7f8c8d;
        }
        .summary-change {
            font-size: 11px;
            font-weight: 600;
            margin-top: 5px;
        }
        .profit-positive {
            color: #27ae60;
        }
        .profit-negative {
            color: #e74c3c;
        }
        .order-analysis {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-bottom: 20px;
        }
        .analysis-header {
            padding: 15px;
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .analysis-title {
            font-size: 16px;
            font-weight: 600;
        }
        .analysis-body {
            padding: 20px;
        }
        .order-table {
            width: 100%;
            border-collapse: collapse;
        }
        .order-table th {
            background: #34495e;
            color: white;
            padding: 10px;
            text-align: left;
            font-size: 12px;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .order-table td {
            padding: 10px;
            border-bottom: 1px solid #ecf0f1;
            font-size: 13px;
        }
        .order-table tr:hover {
            background: #f8f9fa;
        }
        .expandable-row {
            cursor: pointer;
            transition: background 0.3s;
        }
        .expandable-row:hover {
            background: #e8f4f9;
        }
        .expand-icon {
            display: inline-block;
            transition: transform 0.3s;
            margin-right: 5px;
        }
        .expand-icon.expanded {
            transform: rotate(90deg);
        }
        .product-details {
            display: none;
            background: #f8f9fa;
        }
        .product-details.show {
            display: table-row;
        }
        .product-item {
            padding-left: 40px;
            font-size: 12px;
        }
        .profit-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }
        .badge-high-profit {
            background: #e8f5e9;
            color: #388e3c;
        }
        .badge-normal-profit {
            background: #e3f2fd;
            color: #1976d2;
        }
        .badge-low-profit {
            background: #fff3e0;
            color: #f57c00;
        }
        .badge-loss {
            background: #ffebee;
            color: #c62828;
        }
        .cost-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .breakdown-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .breakdown-title {
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
        }
        .breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 13px;
        }
        .breakdown-label {
            color: #7f8c8d;
        }
        .breakdown-value {
            font-weight: 600;
        }
        .chart-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .chart-title {
            font-size: 16px;
            font-weight: 600;
        }
        .pie-chart {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: conic-gradient(
                #27ae60 0deg 108deg,
                #3498db 108deg 198deg,
                #f39c12 198deg 270deg,
                #e74c3c 270deg 324deg,
                #9b59b6 324deg 360deg
            );
            margin: 20px auto;
            position: relative;
        }
        .pie-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120px;
            height: 120px;
            background: white;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .pie-legend {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
        }
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 3px;
        }
        .comparison-table {
            width: 100%;
            margin-top: 15px;
            border-collapse: collapse;
        }
        .comparison-table th {
            background: #f8f9fa;
            padding: 10px;
            text-align: left;
            font-size: 12px;
            font-weight: 600;
            border-bottom: 2px solid #ecf0f1;
        }
        .comparison-table td {
            padding: 10px;
            font-size: 12px;
            border-bottom: 1px solid #ecf0f1;
        }
        .trend-indicator {
            display: inline-block;
            margin-left: 5px;
        }
        .trend-up { color: #27ae60; }
        .trend-down { color: #e74c3c; }
        .margin-bar {
            height: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        .margin-fill {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 11px;
            font-weight: 600;
        }
        .margin-good { background: linear-gradient(90deg, #27ae60, #2ecc71); }
        .margin-normal { background: linear-gradient(90deg, #3498db, #5dade2); }
        .margin-low { background: linear-gradient(90deg, #f39c12, #f5b041); }
        .margin-negative { background: linear-gradient(90deg, #e74c3c, #ec7063); }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>🏭 MEBEL ERP</h2>
        
        <!-- Modern Search Box -->
        <div class="search-box">
            <span class="search-icon">🔍</span>
            <input type="text" placeholder="Modul qidirish..." onkeyup="searchModules(this.value)">
        </div>
        
        <!-- 1-bosqich: Core -->
        <div class="menu-group">
            <div class="menu-group-header" onclick="toggleGroup('core')">
                <div class="menu-group-title">
                    <span class="menu-group-icon">📋</span>
                    <span>Asosiy modullar</span>
                </div>
                <span class="menu-toggle" id="toggle-core">▶</span>
            </div>
            <div class="menu-items" id="group-core">
                <div class="menu-item">
                    <span class="menu-item-icon">📦</span> Buyurtmalar
                </div>
                <div class="menu-item">
                    <span class="menu-item-icon">🪑</span> Mahsulot katalogi
                </div>
                <div class="menu-item">
                    <span class="menu-item-icon">📊</span> Xom ashyolar bazasi
                </div>
                <div class="menu-item">
                    <span class="menu-item-icon">🏢</span> Sexlar boshqaruvi
                </div>
                <div class="menu-item">
                    <span class="menu-item-icon">👷</span> Xodimlar ro'yxati
                </div>
                <div class="menu-item">
                    <span class="menu-item-icon">📈</span> Sklad balansi
                </div>
            </div>
        </div>

        <!-- 2-bosqich: Production -->
        <div class="menu-group">
            <div class="menu-group-header" onclick="toggleGroup('production')">
                <div class="menu-group-title">
                    <span class="menu-group-icon">🏭</span>
                    <span>Ishlab chiqarish</span>
                </div>
                <span class="menu-toggle" id="toggle-production">▶</span>
            </div>
            <div class="menu-items" id="group-production">
                <div class="menu-item">
                    <span class="menu-item-icon">📋</span> BOM va Kalkulyatsiya
                </div>
                <div class="menu-item">
                    <span class="menu-item-icon">🛤️</span> Ishlab chiqarish routelari
                </div>
                <div class="menu-item">
                    <span class="menu-item-icon">📊</span> Buyurtma tayyorligi
                </div>
                <div class="menu-item">
                    <span class="menu-item-icon">💰</span> Tannarx kalkulyatsiya
                </div>
                <div class="menu-item">
                    <span class="menu-item-icon">📄</span> Texnik hujjatlar
                </div>
                <div class="menu-item">
                    <span class="menu-item-icon">📲</span> Barcode/QR Tracking
                </div>
                <div class="menu-item">
                    <span class="menu-item-icon">📱</span> Mobil ilova
                </div>
            </div>
        </div>

        <!-- 3-bosqich: Ish haqi -->
        <div class="menu-group">
            <div class="menu-group-header" onclick="toggleGroup('salary')">
                <div class="menu-group-title">
                    <span class="menu-group-icon">💵</span>
                    <span>Ish haqi boshqaruvi</span>
                </div>
                <span class="menu-toggle" id="toggle-salary">▶</span>
            </div>
            <div class="menu-items" id="group-salary">
                <div class="menu-item">
                    <span class="menu-item-icon">💵</span> Ish haqi hisobi
                </div>
            </div>
        </div>

        <!-- 4-bosqich: Planning & Control -->
        <div class="menu-group">
            <div class="menu-group-header" onclick="toggleGroup('planning')">
                <div class="menu-group-title">
                    <span class="menu-group-icon">📅</span>
                    <span>Rejalashtirish va nazorat</span>
                </div>
                <span class="menu-toggle" id="toggle-planning">▶</span>
            </div>
            <div class="menu-items" id="group-planning">
                <div class="menu-item">
                    <span class="menu-item-icon">✅</span> Sifat nazorati
                </div>
                <div class="menu-item">
                    <span class="menu-item-icon">🛒</span> Supermarket tizimi
                </div>
                <div class="menu-item">
                    <span class="menu-item-icon">📅</span> MPS (Master Schedule)
                </div>
                <div class="menu-item">
                    <span class="menu-item-icon">📊</span> Gantt diagrammalar
                </div>
            </div>
        </div>

        <!-- 5-bosqich: Monitoring & Reports -->
        <div class="menu-group">
            <div class="menu-group-header" onclick="toggleGroup('monitoring')">
                <div class="menu-group-title">
                    <span class="menu-group-icon">📈</span>
                    <span>Monitoring va hisobotlar</span>
                </div>
                <span class="menu-toggle" id="toggle-monitoring">▶</span>
            </div>
            <div class="menu-items" id="group-monitoring">
                <div class="menu-item">
                    <span class="menu-item-icon">📈</span> Real-time monitoring
                </div>
                <div class="menu-item">
                    <span class="menu-item-icon">📊</span> Analitik hisobotlar
                </div>
            </div>
        </div>

        <!-- 6-bosqich: Advanced Planning -->
        <div class="menu-group">
            <div class="menu-group-header" onclick="toggleGroup('advanced')">
                <div class="menu-group-title">
                    <span class="menu-group-icon">🚀</span>
                    <span>Ilg'or rejalashtirish</span>
                </div>
                <span class="menu-toggle" id="toggle-advanced">▶</span>
            </div>
            <div class="menu-items" id="group-advanced">
                <div class="menu-item">
                    <span class="menu-item-icon">📋</span> MRP tizimi
                </div>
                <div class="menu-item">
                    <span class="menu-item-icon">⚙️</span> Capacity Planning
                </div>
            </div>
        </div>

        <!-- 7-bosqich: Management -->
        <div class="menu-group">
            <div class="menu-group-header" onclick="toggleGroup('management')">
                <div class="menu-group-title">
                    <span class="menu-group-icon">💼</span>
                    <span>Rahbariyat uchun</span>
                </div>
                <span class="menu-toggle expanded" id="toggle-management">▶</span>
            </div>
            <div class="menu-items expanded" id="group-management">
                <div class="menu-item active">
                    <span class="menu-item-icon">💰</span> Foyda/Zarar tahlili
                </div>
            </div>
        </div>
    </div>

    <div class="main-content">
        <div class="header">
            <div>
                <h1>Foyda/Zarar tahlili</h1>
                <p style="color: #7f8c8d; margin-top: 5px;">Buyurtmalar va mahsulotlar bo'yicha rentabellik tahlili</p>
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="btn btn-success">📥 Excel eksport</button>
                <button class="btn btn-primary">📊 Dashboard</button>
            </div>
        </div>

        <!-- Filter Panel -->
        <div class="filter-panel">
            <div>
                <label style="font-size: 12px; color: #7f8c8d; display: block;">Davr:</label>
                <select>
                    <option>Yanvar 2025</option>
                    <option>Dekabr 2024</option>
                    <option>4-kvartal 2024</option>
                    <option>2024 yil</option>
                </select>
            </div>
            <div>
                <label style="font-size: 12px; color: #7f8c8d; display: block;">Buyurtma:</label>
                <input type="text" placeholder="Buyurtma raqami..." style="width: 150px;">
            </div>
            <div>
                <label style="font-size: 12px; color: #7f8c8d; display: block;">Mijoz:</label>
                <input type="text" placeholder="Mijoz nomi..." style="width: 150px;">
            </div>
            <div>
                <label style="font-size: 12px; color: #7f8c8d; display: block;">Mahsulot:</label>
                <select>
                    <option>Barcha mahsulotlar</option>
                    <option>Oshxona to'plami</option>
                    <option>Yotoq to'plami</option>
                    <option>Ofis mebellari</option>
                </select>
            </div>
            <div>
                <label style="font-size: 12px; color: #7f8c8d; display: block;">Rentabellik:</label>
                <select>
                    <option>Barcha</option>
                    <option>> 30% (Yuqori)</option>
                    <option>15-30% (O'rta)</option>
                    <option>5-15% (Past)</option>
                    <option>< 5% (Kritik)</option>
                    <option>Zarar</option>
                </select>
            </div>
            <button class="btn btn-primary btn-sm">🔍 Filtr</button>
        </div>

        <!-- Summary Cards -->
        <div class="summary-grid">
            <div class="summary-card" style="border-color: #27ae60;">
                <div class="summary-value">3,845.6</div>
                <div class="summary-label">Jami daromad (mln so'm)</div>
                <div class="summary-change profit-positive">↑ 15% o'tgan oyga nisbatan</div>
            </div>
            <div class="summary-card" style="border-color: #e74c3c;">
                <div class="summary-value">2,768.3</div>
                <div class="summary-label">Jami xarajatlar (mln so'm)</div>
                <div class="summary-change profit-negative">↑ 8%</div>
            </div>
            <div class="summary-card" style="border-color: #3498db;">
                <div class="summary-value">1,077.3</div>
                <div class="summary-label">Sof foyda (mln so'm)</div>
                <div class="summary-change profit-positive">↑ 28%</div>
            </div>
            <div class="summary-card" style="border-color: #f39c12;">
                <div class="summary-value">28%</div>
                <div class="summary-label">O'rtacha margin</div>
                <div class="summary-change profit-positive">↑ 3.5%</div>
            </div>
            <div class="summary-card" style="border-color: #9b59b6;">
                <div class="summary-value">245</div>
                <div class="summary-label">Jami buyurtmalar</div>
                <div class="summary-change">Tugallangan</div>
            </div>
        </div>

        <!-- Main Order Analysis Table -->
        <div class="order-analysis">
            <div class="analysis-header">
                <div class="analysis-title">📊 Buyurtmalar bo'yicha foyda/zarar tahlili</div>
                <button class="btn btn-sm" style="background: white; color: #27ae60;">Batafsil ko'rish</button>
            </div>
            <div class="analysis-body">
                <table class="order-table">
                    <thead>
                        <tr>
                            <th style="width: 30px;"></th>
                            <th>Buyurtma №</th>
                            <th>Mijoz</th>
                            <th>Mahsulot</th>
                            <th>Sotish narxi</th>
                            <th>Tannarx</th>
                            <th>Foyda</th>
                            <th>Margin %</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Order 1 - Expanded example -->
                        <tr class="expandable-row" onclick="toggleDetails('order1')">
                            <td><span class="expand-icon" id="icon-order1">▶</span></td>
                            <td><strong>#Z001</strong></td>
                            <td>Aliyev Sardor</td>
                            <td>Oshxona to'plami "Lux"</td>
                            <td style="font-weight: 600;">15,800,000 so'm</td>
                            <td>10,850,000 so'm</td>
                            <td class="profit-positive" style="font-weight: 600;">4,950,000 so'm</td>
                            <td>
                                <div class="margin-bar">
                                    <div class="margin-fill margin-good" style="width: 31%;">31%</div>
                                </div>
                            </td>
                            <td><span class="profit-badge badge-high-profit">Yuqori foyda</span></td>
                        </tr>
                        <tr class="product-details" id="order1">
                            <td colspan="9">
                                <table class="comparison-table" style="margin: 10px 40px;">
                                    <thead>
                                        <tr>
                                            <th>Mebel/Komplekt</th>
                                            <th>Miqdor</th>
                                            <th>Sotish narxi</th>
                                            <th>Material xarajati</th>
                                            <th>Ish haqi</th>
                                            <th>Qo'shimcha</th>
                                            <th>Foyda</th>
                                            <th>Margin</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="product-item">🗄️ Yuqori shkaflar (3 dona)</td>
                                            <td>3</td>
                                            <td>4,500,000</td>
                                            <td>2,850,000</td>
                                            <td>450,000</td>
                                            <td>180,000</td>
                                            <td class="profit-positive">1,020,000</td>
                                            <td><span class="profit-badge badge-normal-profit">23%</span></td>
                                        </tr>
                                        <tr>
                                            <td class="product-item">🗄️ Pastki shkaflar (4 dona)</td>
                                            <td>4</td>
                                            <td>6,800,000</td>
                                            <td>4,200,000</td>
                                            <td>680,000</td>
                                            <td>250,000</td>
                                            <td class="profit-positive">1,670,000</td>
                                            <td><span class="profit-badge badge-high-profit">25%</span></td>
                                        </tr>
                                        <tr>
                                            <td class="product-item">🪑 Stol va stullar</td>
                                            <td>1</td>
                                            <td>3,200,000</td>
                                            <td>1,850,000</td>
                                            <td>320,000</td>
                                            <td>120,000</td>
                                            <td class="profit-positive">910,000</td>
                                            <td><span class="profit-badge badge-high-profit">28%</span></td>
                                        </tr>
                                        <tr>
                                            <td class="product-item">📦 Aksessuarlar</td>
                                            <td>1</td>
                                            <td>1,300,000</td>
                                            <td>620,000</td>
                                            <td>150,000</td>
                                            <td>80,000</td>
                                            <td class="profit-positive">450,000</td>
                                            <td><span class="profit-badge badge-high-profit">35%</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>

                        <!-- Order 2 -->
                        <tr class="expandable-row" onclick="toggleDetails('order2')">
                            <td><span class="expand-icon" id="icon-order2">▶</span></td>
                            <td><strong>#Z002</strong></td>
                            <td>Karimova Dilnoza</td>
                            <td>Yotoq to'plami "Comfort"</td>
                            <td style="font-weight: 600;">12,500,000 so'm</td>
                            <td>9,250,000 so'm</td>
                            <td class="profit-positive" style="font-weight: 600;">3,250,000 so'm</td>
                            <td>
                                <div class="margin-bar">
                                    <div class="margin-fill margin-good" style="width: 26%;">26%</div>
                                </div>
                            </td>
                            <td><span class="profit-badge badge-normal-profit">O'rta foyda</span></td>
                        </tr>
                        <tr class="product-details" id="order2">
                            <td colspan="9">
                                <table class="comparison-table" style="margin: 10px 40px;">
                                    <thead>
                                        <tr>
                                            <th>Mebel/Komplekt</th>
                                            <th>Miqdor</th>
                                            <th>Sotish narxi</th>
                                            <th>Material xarajati</th>
                                            <th>Ish haqi</th>
                                            <th>Qo'shimcha</th>
                                            <th>Foyda</th>
                                            <th>Margin</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="product-item">🛏️ Kravat (2x2m)</td>
                                            <td>1</td>
                                            <td>5,200,000</td>
                                            <td>3,500,000</td>
                                            <td>450,000</td>
                                            <td>200,000</td>
                                            <td class="profit-positive">1,050,000</td>
                                            <td><span class="profit-badge badge-normal-profit">20%</span></td>
                                        </tr>
                                        <tr>
                                            <td class="product-item">🗄️ Shkaf-kupe</td>
                                            <td>1</td>
                                            <td>4,800,000</td>
                                            <td>3,200,000</td>
                                            <td>380,000</td>
                                            <td>180,000</td>
                                            <td class="profit-positive">1,040,000</td>
                                            <td><span class="profit-badge badge-normal-profit">22%</span></td>
                                        </tr>
                                        <tr>
                                            <td class="product-item">🪑 Tumbochkalar (2 dona)</td>
                                            <td>2</td>
                                            <td>2,500,000</td>
                                            <td>1,650,000</td>
                                            <td>220,000</td>
                                            <td>100,000</td>
                                            <td class="profit-positive">530,000</td>
                                            <td><span class="profit-badge badge-normal-profit">21%</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>

                        <!-- Order 3 -->
                        <tr class="expandable-row">
                            <td><span class="expand-icon">▶</span></td>
                            <td><strong>#Z003</strong></td>
                            <td>Raximov Jasur</td>
                            <td>Ofis mebellari</td>
                            <td style="font-weight: 600;">8,900,000 so'm</td>
                            <td>7,120,000 so'm</td>
                            <td class="profit-positive" style="font-weight: 600;">1,780,000 so'm</td>
                            <td>
                                <div class="margin-bar">
                                    <div class="margin-fill margin-normal" style="width: 20%;">20%</div>
                                </div>
                            </td>
                            <td><span class="profit-badge badge-normal-profit">O'rta foyda</span></td>
                        </tr>

                        <!-- Order 4 - Low profit -->
                        <tr class="expandable-row">
                            <td><span class="expand-icon">▶</span></td>
                            <td><strong>#Z004</strong></td>
                            <td>Toshmatov Aziz</td>
                            <td>Bolalar xonasi</td>
                            <td style="font-weight: 600;">6,500,000 so'm</td>
                            <td>5,850,000 so'm</td>
                            <td class="profit-positive" style="font-weight: 600;">650,000 so'm</td>
                            <td>
                                <div class="margin-bar">
                                    <div class="margin-fill margin-low" style="width: 10%;">10%</div>
                                </div>
                            </td>
                            <td><span class="profit-badge badge-low-profit">Past foyda</span></td>
                        </tr>

                        <!-- Order 5 - Loss -->
                        <tr class="expandable-row">
                            <td><span class="expand-icon">▶</span></td>
                            <td><strong>#Z005</strong></td>
                            <td>Sobirov Dilshod</td>
                            <td>Maxsus buyurtma</td>
                            <td style="font-weight: 600;">4,200,000 so'm</td>
                            <td>4,450,000 so'm</td>
                            <td class="profit-negative" style="font-weight: 600;">-250,000 so'm</td>
                            <td>
                                <div class="margin-bar">
                                    <div class="margin-fill margin-negative" style="width: 6%;">-6%</div>
                                </div>
                            </td>
                            <td><span class="profit-badge badge-loss">Zarar</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Cost Breakdown Analysis -->
        <div class="cost-breakdown">
            <div class="breakdown-card">
                <div class="breakdown-title">💰 Xarajatlar tuzilishi (o'rtacha)</div>
                <div class="breakdown-item">
                    <span class="breakdown-label">Xom ashyolar:</span>
                    <span class="breakdown-value">65%</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">Ish haqi:</span>
                    <span class="breakdown-value">18%</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">Elektr/gaz/suv:</span>
                    <span class="breakdown-value">5%</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">Amortizatsiya:</span>
                    <span class="breakdown-value">3%</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">Transport:</span>
                    <span class="breakdown-value">4%</span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">Boshqa:</span>
                    <span class="breakdown-value">5%</span>
                </div>
            </div>

            <div class="breakdown-card">
                <div class="breakdown-title">📊 Mahsulotlar bo'yicha rentabellik</div>
                <div class="breakdown-item">
                    <span class="breakdown-label">Oshxona to'plami:</span>
                    <span class="breakdown-value profit-positive">32% <span class="trend-indicator trend-up">↑</span></span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">Yotoq to'plami:</span>
                    <span class="breakdown-value profit-positive">28% <span class="trend-indicator trend-up">↑</span></span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">Ofis mebellari:</span>
                    <span class="breakdown-value" style="color: #3498db;">22% <span class="trend-indicator">→</span></span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">Shkaf-kupe:</span>
                    <span class="breakdown-value" style="color: #f39c12;">18% <span class="trend-indicator trend-down">↓</span></span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">Bolalar mebeli:</span>
                    <span class="breakdown-value" style="color: #f39c12;">15% <span class="trend-indicator trend-down">↓</span></span>
                </div>
                <div class="breakdown-item">
                    <span class="breakdown-label">Maxsus buyurtmalar:</span>
                    <span class="breakdown-value profit-negative">8% <span class="trend-indicator trend-down">↓</span></span>
                </div>
            </div>
        </div>

        <!-- Profit Distribution Chart -->
        <div class="chart-container">
            <div class="chart-header">
                <div class="chart-title">📈 Foyda taqsimoti (mahsulot turlari bo'yicha)</div>
                <select style="padding: 5px 10px; border-radius: 4px; border: 1px solid #ddd;">
                    <option>Yanvar 2025</option>
                    <option>Dekabr 2024</option>
                    <option>4-kvartal 2024</option>
                </select>
            </div>
            <div style="display: flex; align-items: center; gap: 40px;">
                <div>
                    <div class="pie-chart">
                        <div class="pie-center">
                            <div style="font-size: 24px; font-weight: bold;">1,077</div>
                            <div style="font-size: 12px; color: #7f8c8d;">mln so'm</div>
                        </div>
                    </div>
                    <div class="pie-legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background: #27ae60;"></div>
                            <span>Oshxona (30%)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #3498db;"></div>
                            <span>Yotoq (25%)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #f39c12;"></div>
                            <span>Ofis (20%)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #e74c3c;"></div>
                            <span>Shkaf-kupe (15%)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #9b59b6;"></div>
                            <span>Boshqa (10%)</span>
                        </div>
                    </div>
                </div>
                
                <div style="flex: 1;">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Mahsulot turi</th>
                                <th>Buyurtmalar</th>
                                <th>Daromad (mln)</th>
                                <th>Foyda (mln)</th>
                                <th>Margin %</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Oshxona to'plami</strong></td>
                                <td>65</td>
                                <td>1,230.5</td>
                                <td class="profit-positive">323.1</td>
                                <td><span class="profit-badge badge-high-profit">32%</span></td>
                            </tr>
                            <tr>
                                <td><strong>Yotoq to'plami</strong></td>
                                <td>52</td>
                                <td>980.2</td>
                                <td class="profit-positive">269.3</td>
                                <td><span class="profit-badge badge-normal-profit">28%</span></td>
                            </tr>
                            <tr>
                                <td><strong>Ofis mebellari</strong></td>
                                <td>48</td>
                                <td>856.7</td>
                                <td class="profit-positive">215.4</td>
                                <td><span class="profit-badge badge-normal-profit">22%</span></td>
                            </tr>
                            <tr>
                                <td><strong>Shkaf-kupe</strong></td>
                                <td>35</td>
                                <td>542.3</td>
                                <td class="profit-positive">161.6</td>
                                <td><span class="profit-badge badge-low-profit">18%</span></td>
                            </tr>
                            <tr>
                                <td><strong>Boshqa</strong></td>
                                <td>45</td>
                                <td>235.9</td>
                                <td class="profit-positive">107.9</td>
                                <td><span class="profit-badge badge-low-profit">12%</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Recommendations -->
        <div class="order-analysis">
            <div class="analysis-header" style="background: linear-gradient(135deg, #f39c12, #e67e22);">
                <div class="analysis-title">💡 Tavsiyalar va optimizatsiya imkoniyatlari</div>
            </div>
            <div class="analysis-body">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div style="padding: 15px; background: #e8f5e9; border-radius: 5px; border-left: 3px solid #27ae60;">
                        <h4 style="margin-bottom: 10px; color: #27ae60;">✅ Yuqori rentabellik mahsulotlari</h4>
                        <ul style="margin: 0; padding-left: 20px; font-size: 13px;">
                            <li>Oshxona to'plamlariga e'tibor kuchaytirilsin</li>
                            <li>Premium segment mahsulotlarini ko'paytirish</li>
                            <li>Aksessuarlar qo'shilgan paketlar taklif qilish</li>
                        </ul>
                    </div>
                    <div style="padding: 15px; background: #fff3e0; border-radius: 5px; border-left: 3px solid #f39c12;">
                        <h4 style="margin-bottom: 10px; color: #f39c12;">⚠️ Xarajatlarni kamaytirish</h4>
                        <ul style="margin: 0; padding-left: 20px; font-size: 13px;">
                            <li>Material sarfini 5-7% kamaytirish imkoniyati</li>
                            <li>Energiya sarfini optimallashtirish</li>
                            <li>Logistika xarajatlarini qayta ko'rib chiqish</li>
                        </ul>
                    </div>
                    <div style="padding: 15px; background: #ffebee; border-radius: 5px; border-left: 3px solid #e74c3c;">
                        <h4 style="margin-bottom: 10px; color: #e74c3c;">🚫 Past rentabel mahsulotlar</h4>
                        <ul style="margin: 0; padding-left: 20px; font-size: 13px;">
                            <li>Maxsus buyurtmalar narxini qayta ko'rib chiqish</li>
                            <li>Zarar keltiruvchi mahsulotlarni to'xtatish</li>
                            <li>Minimal buyurtma miqdorini oshirish</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function toggleGroup(groupId) {
            const groupElement = document.getElementById('group-' + groupId);
            const toggleIcon = document.getElementById('toggle-' + groupId);
            
            if (groupElement.classList.contains('expanded')) {
                groupElement.classList.remove('expanded');
                toggleIcon.classList.remove('expanded');
            } else {
                groupElement.classList.add('expanded');
                toggleIcon.classList.add('expanded');
            }
        }

        function toggleDetails(orderId) {
            const detailsRow = document.getElementById(orderId);
            const icon = document.getElementById('icon-' + orderId);
            
            if (detailsRow.classList.contains('show')) {
                detailsRow.classList.remove('show');
                icon.classList.remove('expanded');
            } else {
                detailsRow.classList.add('show');
                icon.classList.add('expanded');
            }
        }
        
        function searchModules(searchText) {
            const groups = document.querySelectorAll('.menu-group');
            searchText = searchText.toLowerCase();
            
            if (searchText === '') {
                // If search is empty, show all groups and collapse all except management
                groups.forEach(group => {
                    group.style.display = 'block';
                    const items = group.querySelector('.menu-items');
                    const toggle = group.querySelector('.menu-toggle');
                    if (items.id !== 'group-management') {
                        items.classList.remove('expanded');
                        toggle.classList.remove('expanded');
                    }
                });
            } else {
                // Search and expand matching groups
                groups.forEach(group => {
                    const menuItems = group.querySelectorAll('.menu-item');
                    let hasMatch = false;
                    
                    menuItems.forEach(item => {
                        const text = item.textContent.toLowerCase();
                        if (text.includes(searchText)) {
                            hasMatch = true;
                            item.style.background = '#3d566e';
                        } else {
                            item.style.background = '';
                        }
                    });
                    
                    if (hasMatch) {
                        group.style.display = 'block';
                        const items = group.querySelector('.menu-items');
                        const toggle = group.querySelector('.menu-toggle');
                        items.classList.add('expanded');
                        toggle.classList.add('expanded');
                    } else {
                        group.style.display = 'none';
                    }
                });
            }
        }
        
        // Auto-expand active menu group on load
        window.addEventListener('DOMContentLoaded', function() {
            // Management group is already expanded by default since it contains the active item
        });
    </script>
</body>
</html>